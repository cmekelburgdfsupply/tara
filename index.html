<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>21 Tara Recitation Counter</title>
    
    <!-- Custom Icon -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg width='64' height='64' viewBox='0 0 64 64' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Ccircle cx='32' cy='32' r='32' fill='%23059669'/%3E%3Ccircle cx='32' cy='32' r='20' fill='white' fill-opacity='0.3'/%3E%3Ccircle cx='32' cy='32' r='12' fill='white'/%3E%3Ccircle cx='32' cy='32' r='8' fill='%2310b981'/%3E%3C/svg%3E">
    <link rel="apple-touch-icon" sizes="180x180" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALQAAAC0CAYAAAA9zQYyAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAOxAAADsQBlSsOGwAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAABBISURBVHic7Z1/jBXVHcc/u+y+t7vL7i67sAv7A1gQFbEqGKMxGmNs0zRN0zRt0qZpmjZN2zRt06Zt2rZp2/SHTdM0TZu2aZs2bdM0TdOkTZs2bdOmTds0bZs2bdOkbZs2bZomTdM0TZs2bZs2bZo2bdOmTdOmTZs2bZo2bZo2TZs2TZumTdOmTdOmTZumTZs2TZs2bZo2TZs2bZo2TZs2bZo2bZo2TZs2bZo2TZs2bZo2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo2TZs2bZo">
    <link rel="manifest" href="data:application/json,%7B%22name%22%3A%2221%20Tara%20Counter%22%2C%22short_name%22%3A%22Tara%22%2C%22icons%22%3A%5B%7B%22src%22%3A%22data%3Aimage/png%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAYAAABccqhmAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAOxAAADsQBlSsOGwAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAABBJSURBVHic7Z0JjBXVHcZnl2V3WRYFAWF3AVHB%22%2C%22sizes%22%3A%22256x256%22%2C%22type%22%3A%22image/png%22%7D%5D%2C%22start_url%22%3A%22/%22%2C%22display%22%3A%22standalone%22%2C%22background_color%22%3A%22%23059669%22%2C%22theme_color%22%3A%22%23059669%22%7D">
    <meta name="theme-color" content="#059669">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            min-height: 100vh;
            background: linear-gradient(135deg, #064e3b, #059669, #047857);
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            padding: 20px;
        }

        .container {
            max-width: 400px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 2rem;
        }

        .header h1 {
            color: white;
            font-size: 2rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        .header p {
            color:#ffffff;
        }

        .card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(16px);
            border-radius: 1rem;
            padding: 1.5rem;
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
            margin-bottom: 1.5rem;
        }

        .count-display {
            text-align: center;
        }

        .count-title {
            color:#ffffff;
            font-size: 1.125rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .count-number {
            color: white;
            font-size: 3rem;
            font-weight: bold;
            margin-bottom: 1rem;
        }

        .count-subtitle {
            color:#ffffff;
            font-size: 0.875rem;
        }

        .month-header {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            margin-bottom: 0.5rem;
        }

        .input-section {
            text-align: center;
        }

        .input-label {
            color:#ffffff;
            font-size: 0.875rem;
            font-weight: 500;
            margin-bottom: 0.75rem;
            display: block;
        }

        .toggle-buttons {
            display: flex;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 0.5rem;
            padding: 0.25rem;
            margin: 0 auto 0.75rem;
            width: fit-content;
        }

        .toggle-btn {
            padding: 0.5rem 1rem;
            border: none;
            border-radius: 0.375rem;
            font-size: 0.875rem;
            cursor: pointer;
            transition: all 0.2s;
            background: transparent;
            color:#ffffff;
        }

        .toggle-btn.active {
            background: #8b5cf6;
            color: white;
        }

        .toggle-btn:hover:not(.active) {
            color: white;
        }

        .preset-select, .custom-input {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 0.5rem;
            padding: 0.5rem 1rem;
            font-size: 1rem;
            outline: none;
            transition: all 0.2s;
        }

        .preset-select:focus, .custom-input:focus {
            border-color: #8b5cf6;
            box-shadow: 0 0 0 2px rgba(139, 92, 246, 0.3);
        }

        .custom-input {
            width: 120px;
            text-align: center;
        }

        .custom-input::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }

        .add-btn {
            width: 100%;
            background: linear-gradient(135deg, #ec4899, #8b5cf6);
            color: white;
            font-weight: 600;
            padding: 1rem 1.5rem;
            border: none;
            border-radius: 1rem;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.2s;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }

        .add-btn:hover:not(:disabled) {
            background: linear-gradient(135deg, #db2777, #7c3aed);
            transform: scale(1.02);
        }

        .add-btn:active:not(:disabled) {
            transform: scale(0.98);
        }

        .add-btn:disabled {
            background: linear-gradient(135deg, #6b7280, #6b7280);
            cursor: not-allowed;
            transform: none;
        }

        .reset-buttons {
            display: flex;
            gap: 0.75rem;
        }

        .reset-btn {
            flex: 1;
            background: rgba(255, 255, 255, 0.1);
            color:#ffffff;
            font-weight: 500;
            padding: 0.75rem 1rem;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 0.75rem;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        .reset-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            color: white;
        }

        .blessing {
            text-align: center;
            margin-top: 2rem;
            color: white;
            font-style: italic;
            font-size: 0.875rem;
        }

        .heart {
            color: #f9a8d4;
        }

        .icon {
            width: 1.25rem;
            height: 1.25rem;
            fill: currentColor;
        }

        option {
            color: #374151;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>
                <span class="heart">♥</span>
                21 Taras Counter
                <span class="heart">♥</span>
            </h1>
            <p>Track your daily recitations</p>
        </div>

        <!-- Total Count Card -->
        <div class="card">
            <div class="count-display">
                <h2 class="count-title">Total Recitations</h2>
                <div class="count-number" id="totalCount">0</div>
                <div class="count-subtitle">Complete 21 Taras prayers recited</div>
            </div>
        </div>

        <!-- Monthly Count Card -->
        <div class="card">
            <div class="count-display">
                <div class="month-header">
                    <svg class="icon" viewBox="0 0 24 24">
                        <path d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z"/>
                    </svg>
                    <h2 class="count-title" id="currentMonth">Loading...</h2>
                </div>
                <div class="count-number" id="monthlyCount">0</div>
                <div class="count-subtitle">Prayers this month</div>
            </div>
        </div>

        <!-- Input Section -->
        <div class="card">
            <div class="input-section">
                <label class="input-label">Prayers per session</label>
                
                <div class="toggle-buttons">
                    <button class="toggle-btn active" id="presetBtn">Preset</button>
                    <button class="toggle-btn" id="customBtn">Custom</button>
                </div>

                <div id="presetSection">
                    <select class="preset-select" id="presetSelect">
                        <option value="3" selected>3 prayers</option>
                        <option value="5">5 prayers</option>
                        <option value="10">10 prayers</option>
                    </select>
                </div>

                <div id="customSection" style="display: none;">
                    <input type="number" class="custom-input" id="customInput" placeholder="Enter number" min="1">
                </div>
            </div>
        </div>

        <!-- Action Buttons -->
        <div>
            <button class="add-btn" id="addBtn">
                <svg class="icon" viewBox="0 0 24 24">
                    <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>
                </svg>
                <span id="addBtnText">Add 3 Prayers</span>
            </button>

            <div class="reset-buttons">
                <button class="reset-btn" id="resetMonthlyBtn">
                    <svg class="icon" viewBox="0 0 24 24">
                        <path d="M12 6v3l4-4-4-4v3c-4.42 0-8 3.58-8 8 0 1.57.46 3.03 1.24 4.26L6.7 14.8c-.45-.83-.7-1.79-.7-2.8 0-3.31 2.69-6 6-6zm6.76 1.74L17.3 9.2c.44.84.7 1.79.7 2.8 0 3.31-2.69 6-6 6v-3l-4 4 4 4v-3c4.42 0 8-3.58 8-8 0-1.57-.46-3.03-1.24-4.26z"/>
                    </svg>
                    Reset Monthly
                </button>
                
                <button class="reset-btn" id="resetAllBtn">
                    <svg class="icon" viewBox="0 0 24 24">
                        <path d="M12 6v3l4-4-4-4v3c-4.42 0-8 3.58-8 8 0 1.57.46 3.03 1.24 4.26L6.7 14.8c-.45-.83-.7-1.79-.7-2.8 0-3.31 2.69-6 6-6zm6.76 1.74L17.3 9.2c.44.84.7 1.79.7 2.8 0 3.31-2.69 6-6 6v-3l-4 4 4 4v-3c4.42 0 8-3.58 8-8 0-1.57-.46-3.03-1.24-4.26z"/>
                    </svg>
                    Reset All
                </button>
            </div>
        </div>

        <div class="blessing">
            <p>"May all beings be free from suffering and the causes of suffering"</p>
        </div>
    </div>

    <script>
        // Initialize variables
        let totalCount = 0;
        let monthlyCount = 0;
        let currentMonth = '';
        let useCustom = false;

        // DOM elements
        const totalCountEl = document.getElementById('totalCount');
        const monthlyCountEl = document.getElementById('monthlyCount');
        const currentMonthEl = document.getElementById('currentMonth');
        const presetBtn = document.getElementById('presetBtn');
        const customBtn = document.getElementById('customBtn');
        const presetSection = document.getElementById('presetSection');
        const customSection = document.getElementById('customSection');
        const presetSelect = document.getElementById('presetSelect');
        const customInput = document.getElementById('customInput');
        const addBtn = document.getElementById('addBtn');
        const addBtnText = document.getElementById('addBtnText');
        const resetMonthlyBtn = document.getElementById('resetMonthlyBtn');
        const resetAllBtn = document.getElementById('resetAllBtn');

        // Load data from localStorage
        function loadData() {
            const data = JSON.parse(localStorage.getItem('taraCounter') || '{}');
            totalCount = data.totalCount || 0;
            monthlyCount = data.monthlyCount || 0;
            currentMonth = data.currentMonth || getCurrentMonthYear();
            
            // Check if month has changed
            const nowMonth = getCurrentMonthYear();
            if (currentMonth !== nowMonth) {
                currentMonth = nowMonth;
                monthlyCount = 0;
                saveData();
            }
            
            updateDisplay();
        }

        // Save data to localStorage
        function saveData() {
            const data = {
                totalCount,
                monthlyCount,
                currentMonth
            };
            localStorage.setItem('taraCounter', JSON.stringify(data));
        }

        // Get current month/year string
        function getCurrentMonthYear() {
            return new Date().toLocaleDateString('en-US', { month: 'long', year: 'numeric' });
        }

        // Update display
        function updateDisplay() {
            totalCountEl.textContent = totalCount.toLocaleString();
            monthlyCountEl.textContent = monthlyCount.toLocaleString();
            currentMonthEl.textContent = currentMonth;
            updateAddButton();
        }

        // Update add button text and state
        function updateAddButton() {
            const amount = useCustom ? (parseInt(customInput.value) || 0) : parseInt(presetSelect.value);
            const isValid = amount > 0;
            
            addBtnText.textContent = `Add ${amount} Prayer${amount !== 1 ? 's' : ''}`;
            addBtn.disabled = !isValid;
        }

        // Toggle between preset and custom
        function toggleMode(custom) {
            useCustom = custom;
            
            if (custom) {
                presetBtn.classList.remove('active');
                customBtn.classList.add('active');
                presetSection.style.display = 'none';
                customSection.style.display = 'block';
                customInput.focus();
            } else {
                customBtn.classList.remove('active');
                presetBtn.classList.add('active');
                customSection.style.display = 'none';
                presetSection.style.display = 'block';
            }
            
            updateAddButton();
        }

        // Add recitations
        function addRecitations() {
            const amount = useCustom ? (parseInt(customInput.value) || 0) : parseInt(presetSelect.value);
            
            if (amount <= 0) return;
            
            // Check if month changed
            const nowMonth = getCurrentMonthYear();
            if (currentMonth !== nowMonth) {
                currentMonth = nowMonth;
                monthlyCount = amount;
            } else {
                monthlyCount += amount;
            }
            
            totalCount += amount;
            
            // Clear custom input
            if (useCustom) {
                customInput.value = '';
            }
            
            saveData();
            updateDisplay();
        }

        // Reset functions
        function resetMonthly() {
            if (confirm('Reset monthly count?')) {
                monthlyCount = 0;
                saveData();
                updateDisplay();
            }
        }

        function resetAll() {
            if (confirm('Reset all counts? This cannot be undone.')) {
                totalCount = 0;
                monthlyCount = 0;
                saveData();
                updateDisplay();
            }
        }

        // Event listeners
        presetBtn.addEventListener('click', () => toggleMode(false));
        customBtn.addEventListener('click', () => toggleMode(true));
        presetSelect.addEventListener('change', updateAddButton);
        customInput.addEventListener('input', updateAddButton);
        addBtn.addEventListener('click', addRecitations);
        resetMonthlyBtn.addEventListener('click', resetMonthly);
        resetAllBtn.addEventListener('click', resetAll);

        // Initialize
        loadData();
    </script>
</body>
</html>
